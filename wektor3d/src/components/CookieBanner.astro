<div id="cookie-banner" class="fixed bottom-0 left-0 w-full bg-zinc-900/95 backdrop-blur-md border-t border-zinc-700 p-6 z-[100] translate-y-full transition-transform duration-500 shadow-2xl flex flex-col md:flex-row items-center justify-between gap-4 hidden">
  <div class="text-zinc-300 text-sm md:text-base">
    <p>
      ğŸª <strong>Dbam o TwojÄ… prywatnoÅ›Ä‡.</strong> UÅ¼ywam plikÃ³w cookies tylko do analizy ruchu (Google Analytics), aby ulepszaÄ‡ stronÄ™. 
      <a href="/polityka-prywatnosci" class="text-orange-500 hover:text-white underline">Czytaj wiÄ™cej</a>.
    </p>
  </div>
  <div class="flex gap-4">
    <button id="cookie-reject" class="px-4 py-2 border border-zinc-600 text-zinc-300 rounded-lg hover:bg-zinc-800 hover:text-white transition-colors text-sm font-medium">
      OdrzuÄ‡
    </button>
    <button id="cookie-accept" class="px-6 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg transition-colors text-sm font-bold shadow-lg shadow-orange-900/20">
      AkceptujÄ™
    </button>
  </div>
</div>

<script>
  // Funkcja Å‚adujÄ…ca Google Tag Manager (GTM)
  function loadGTM() {
    // Tutaj uÅ¼ytkownik wstawi swÃ³j ID: GTM-XXXXXXX
    const gtmId = 'GTM-PLACEHOLDER'; 
    
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer',gtmId);
    
    console.log('GTM Loaded via Consent');
  }

  const banner = document.getElementById('cookie-banner');
  const acceptBtn = document.getElementById('cookie-accept');
  const rejectBtn = document.getElementById('cookie-reject');

  // SprawdÅº czy uÅ¼ytkownik juÅ¼ podjÄ…Å‚ decyzjÄ™
  const consent = localStorage.getItem('cookie_consent');

  if (!consent) {
    // PokaÅ¼ baner z opÃ³Åºnieniem (dla estetyki)
    banner.classList.remove('hidden');
    setTimeout(() => {
      banner.classList.remove('translate-y-full');
    }, 500);
  } else if (consent === 'granted') {
    loadGTM(); // ZaÅ‚aduj GTM od razu, jeÅ›li jest zgoda
  }

  // ObsÅ‚uga Akceptacji
  acceptBtn.addEventListener('click', () => {
    localStorage.setItem('cookie_consent', 'granted');
    banner.classList.add('translate-y-full');
    setTimeout(() => banner.classList.add('hidden'), 500);
    loadGTM(); // Odpal skrypt
  });

  // ObsÅ‚uga Odrzucenia
  rejectBtn.addEventListener('click', () => {
    localStorage.setItem('cookie_consent', 'denied');
    banner.classList.add('translate-y-full');
    setTimeout(() => banner.classList.add('hidden'), 500);
  });
</script>
