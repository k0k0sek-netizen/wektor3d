---
// Props pozwalają na opcjonalną zmianę rozmiaru, domyślnie w-11 h-11
const { class: className = "w-11 h-11" } = Astro.props;
---

<div data-logo-anim="true" class={`flex items-center justify-center ${className} bg-zinc-800/80 rounded-2xl ring-1 ring-inset ring-white/10 transition-all duration-300 ease-out group-hover:scale-110 group-hover:bg-zinc-700 group-hover:border-orange-500/30 group-active:scale-95 group-active:bg-zinc-800`}>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-orange-500 w-[60%] h-[60%] transition-transform group-hover:rotate-3">
    <path d="m18 16 4-4-4-4"/>
    <path d="m6 8-4 4 4 4"/>
    <path d="m14.5 4-5 16"/>
  </svg>
</div>

<script>
  // Czekamy, aż strona się "uspokoi" (3 sekundy)
  setTimeout(() => {
    const logos = document.querySelectorAll('[data-logo-anim="true"]');
    logos.forEach(logo => {
      logo.classList.add('logo-anim');
    });
  }, 3000);
</script>

<style>
  @keyframes periodic-pulse {
    /* STAN SPOCZYNKU */
    0% { 
      transform: scale(1); 
      box-shadow: 0 0 0 0 transparent;
      border-color: rgba(255, 255, 255, 0.1);
    }

    /* PIERWSZE UDERZENIE (Mocne - "LUB") */
    4% { 
      transform: scale(1.08); 
      box-shadow: 
        0 0 15px 2px rgba(249, 115, 22, 0.6), /* Mocny Neon */
        0 0 30px 10px rgba(249, 115, 22, 0.2);
      border-color: rgba(249, 115, 22, 1);
    }
    
    /* Krótki powrót */
    8% { 
      transform: scale(1); 
      box-shadow: 0 0 5px 0 rgba(249, 115, 22, 0);
      border-color: rgba(255, 255, 255, 0.1);
    }

    /* DRUGIE UDERZENIE (Słabsze - "DUB") */
    12% { 
      transform: scale(1.04); 
      box-shadow: 
        0 0 10px 1px rgba(249, 115, 22, 0.4), /* Słabszy Neon */
        0 0 20px 5px rgba(249, 115, 22, 0.1);
      border-color: rgba(249, 115, 22, 0.7);
    }

    /* KONIEC CYKLU - Długa cisza */
    18%, 100% { 
      transform: scale(1); 
      box-shadow: 0 0 0 0 transparent; 
      border-color: rgba(255, 255, 255, 0.1);
    }
  }

  .logo-anim {
    /* Animacja trwa 6s, nieskończona pętla */
    animation: periodic-pulse 6s ease-in-out infinite;
    
    /* NOWOŚĆ: Startuje dopiero po wstrzyknięciu klasy przez JS */
    /* animation-delay: 4s; <- USUNIĘTE, bo JS robi opóźnienie */ 
    
    /* Optymalizacja dla przeglądarki */
    will-change: transform, box-shadow, border-color;
  }

  /* Wyłącz pulsowanie podczas hovera, żeby nie gryzło się z interakcją */
  :global(.group:hover) .logo-anim {
    animation: none;
  }
</style>
